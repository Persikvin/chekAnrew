<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANDREW_SYSTEM v1.3.7</title>
    <link rel="stylesheet" href="style.css">
    <title>Andrusha_wav Twitch Terminal</title>
    <style>
        body {
            background-color: black;
            color: #00FF00; /* Зелёный текст */
            font-family: monospace;
            margin: 0;
            padding: 10px;
            overflow: hidden;
        }
        #terminal {
            white-space: pre-wrap; /* Перенос строк */
            height: 100vh;
            overflow: hidden;
            word-break: break-all; /* Чтобы длинные строки не вылезали */
        }
    </style>
</head>
<body>
    <div class="terminal">
        <div class="scanlines"></div>
        <div class="noise"></div>
        <div class="terminal-content">
            <div class="header">
                <pre>
  ___  _  _  ____  __    ____  _  _  ____ 
 / __)( \/ )(  _ \(  )  (  _ \( \/ )( ___)
( (__  )  (  )___/ )(__  )___/ \  /  )__) 
 \___)(_/\_)(__)  (____)(__)    \/  (____)
                </pre>
                <p>ANDREW_SYSTEM v1.3.7 - BOOTING...</p>
                <p>COPYRIGHT (C) 1993 ANDREW CORP. ALL RIGHTS RESERVED.</p>
            </div>
            <div class="output" id="terminalOutput">
                <!-- Здесь будет выводиться текст -->
            </div>
            <div class="input-line">
                <span class="prompt">C:\ANDREW\SYSTEM></span>
                <span class="cursor">_</span>
            </div>
        </div>
    </div>
    <audio id="beepSound" src="assets/sounds/terminal-beep.mp3" preload="auto"></audio>
    <script src="script.js"></script>
    <script src="twitch.js"></script>
     <div id="terminal">> Загрузка системы...</div> <!-- Начальное сообщение -->
    
    <!-- Подключаем tmi.js -->
    <script src="https://cdn.jsdelivr.net/npm/tmi.js@1.8.5/dist/tmi.min.js"></script>
    <script>
        const terminal = document.getElementById('terminal');
        
        // Функция для добавления текста
        function addText(text) {
            terminal.innerHTML += text + '\n';
            terminal.scrollTop = terminal.scrollHeight; // Автоскролл
        }
        
        // 1. Проверяем, что элементы существуют
        if (!terminal) {
            alert('Ошибка: элемент terminal не найден!');
        } else {
            addText('> Проверка зависимостей...');
        }
        
        // 2. Проверяем подключение tmi.js
        if (typeof tmi === 'undefined') {
            addText('> Ошибка: tmi.js не загружен!');
        } else {
            addText('> Библиотека чата загружена');
        }
        
        // Системные сообщения
        const systemMessages = [
            "System: Обнаружен майнер (убит процесс " + Math.floor(Math.random()*9000+1000) + ")",
            "System: Донаты: " + (Math.random() > 0.5 ? "ВКЛ" : "ВЫКЛ"),
            "System: CPU: " + Math.floor(Math.random()*100) + "%",
            "System: Сканирование завершено"
        ];
        
        // 3. Пробуем подключиться к чату
        try {
            const client = new tmi.Client({
                channels: ['andrusha_wav'],
                connection: {
                    reconnect: true,
                    secure: true
                }
            });
            
            client.connect().then(() => {
                addText('> Успешное подключение к чату');
            }).catch(e => {
                addText('> Ошибка подключения: ' + e.message);
            });
            
            client.on('message', (channel, tags, message) => {
                addText(`${tags['display-name']}: ${message}`);
            });
            
        } catch (e) {
            addText('> Критическая ошибка: ' + e.message);
        }
        
        // Запускаем системные сообщения каждые 5-15 сек
        setInterval(() => {
            addText(systemMessages[Math.floor(Math.random()*systemMessages.length)]);
        }, 5000 + Math.random() * 10000);
        
        // Первые сообщения для проверки
        setTimeout(() => addText('> Инициализация завершена'), 1000);
        setTimeout(() => addText('> Ожидание данных...'), 2000);
    </script>
</body>
</html>
